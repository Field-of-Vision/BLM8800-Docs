/*
 * Copyright (C) 2018-2023 AICSemi Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Includes
 */
#include "sysctrl_api.h"

/**
 * Macros
 */
/* Flag to indicate fast clk */
#define CLK_CFG_FAST_BIT            (0x01U << 7)
/* Flag to indicate flash selects fclk */
#define FLASH_SEL_FCLK_BIT          (0x01U << 0)

#define FLASH_CDIV_SDLY(div,dly)    (((div) << 8) | ((dly) << 4))

#define CLK_CFG_CODE(dd,ds,dp,df)   (((dd)<<24)|((ds)<<20)|((dp)<<16)|(df))

/**
 * TypeDefs
 */

/**
 * Variables
 */
const unsigned int clk_cfg_code_tbl[CLK_CFG_MAX] = {
    // cpusys flck: 480MHz
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_1  ),2,2,(FLASH_CDIV_SDLY(0x4,4)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D480S240P120F120
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_1  ),2,2,(FLASH_CDIV_SDLY(0x6,3)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D480S240P120F80
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_1  ),2,2,(FLASH_CDIV_SDLY(0x8,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D480S240P120F60
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_1  ),2,2,(FLASH_CDIV_SDLY(0xC,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D480S240P120F40
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_1  ),2,4,(FLASH_CDIV_SDLY(0x4,4)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D480S240P60F120
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_1  ),2,4,(FLASH_CDIV_SDLY(0x6,3)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D480S240P60F80
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_1  ),2,4,(FLASH_CDIV_SDLY(0x8,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D480S240P60F60
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_1  ),2,4,(FLASH_CDIV_SDLY(0xC,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D480S240P60F40
    // cpusys flck: 240MHz
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),1,2,(FLASH_CDIV_SDLY(0x2,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S240P120F120
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),1,2,(FLASH_CDIV_SDLY(0x4,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S240P120F60
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),1,2,(FLASH_CDIV_SDLY(0x6,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S240P120F40
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),1,4,(FLASH_CDIV_SDLY(0x4,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S240P60F60
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),1,4,(FLASH_CDIV_SDLY(0x6,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S240P60F40
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),2,2,(FLASH_CDIV_SDLY(0x2,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S120P60F120
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),2,2,(FLASH_CDIV_SDLY(0x4,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S120P60F60
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),2,2,(FLASH_CDIV_SDLY(0x6,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S120P60F40
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),2,4,(FLASH_CDIV_SDLY(0x4,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S120P30F60
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2  ),2,4,(FLASH_CDIV_SDLY(0x6,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D240S120P30F40
    // cpusys flck: 192MHz
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2P5),1,2,(FLASH_CDIV_SDLY(0x2,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D192S192P96F96
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2P5),1,2,(FLASH_CDIV_SDLY(0x4,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D192S192P96F48
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2P5),1,4,(FLASH_CDIV_SDLY(0x2,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D192S192P48F96
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_2P5),1,4,(FLASH_CDIV_SDLY(0x4,2)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D192S192P48F48
    // cpusys flck: 120MHz
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_4  ),1,2,(FLASH_CDIV_SDLY(0x2,1)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D120S120P60F60
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_4  ),1,2,(FLASH_CDIV_SDLY(0x4,1)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D120S120P60F30
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_4  ),1,4,(FLASH_CDIV_SDLY(0x2,1)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D120S120P30F60
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_4  ),1,4,(FLASH_CDIV_SDLY(0x4,1)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D120S120P30F30
    // cpusys flck: 80MHz
    CLK_CFG_CODE((CLK_CFG_FAST_BIT|CLK_DIV_VALUE_6  ),1,2,(FLASH_CDIV_SDLY(0x2,1)|FLASH_SEL_FCLK_BIT)), //CLK_CFG_D80S80P40F40
    // cpusys flck: 52MHz
    CLK_CFG_CODE((                 CLK_DIV_VALUE_1  ),1,2,(FLASH_CDIV_SDLY(0x2,1)                   )), //CLK_CFG_D52S52P26F26
};

/**
 * Functions
 */
